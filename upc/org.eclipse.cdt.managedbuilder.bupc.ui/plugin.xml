<?xml version="1.0" encoding="UTF-8"?>
<?eclipse version="3.0"?>
<plugin>
<extension point="org.eclipse.cdt.core.templates">
<template filterPattern=".*"
	id="org.eclipse.cdt.core.templates.HelloWorldUPCProject"
    location="templates/template.xml"
    projectType="org.eclipse.cdt.build.core.buildArtefactType.exe">
    </template>      
</extension>

<extension
      id="org.eclipse.cdt.managedbuilder.bupc.ui.upcBuildDefinitions"
      name="UPC toolchain"
      point="org.eclipse.cdt.managedbuilder.core.buildDefinitions">
      
  <tool
	command="upcc"
	id = "org.eclipse.cdt.managedbuild.tool.bupc.compiler"
	isAbstract="false"
	name = "Berkeley UPC Compiler"
	natureFilter = "both"
	outputFlag = "-o">
	<supportedProperties>
            <property id="org.eclipse.cdt.build.core.buildType">
	            <value id="org.eclipse.cdt.build.core.buildType.debug"/>
    	        <value id="org.eclipse.cdt.build.core.buildType.release"/>
            </property>
    </supportedProperties>
	<optionCategory
		owner="org.eclipse.cdt.managedbuild.tool.bupc.compiler"
		id = "bupc.ui.optionCategory.compiler.gen"
		name = "General"/>
   <option
   		category="bupc.ui.optionCategory.compiler.gen"
   		command="-g"
   		id="bupc.ui.compiler.general.preprocess"
   		isAbstract="false"
   		name = "Preprocess only (-E)"
   		resourceFilter="project"
   		valueType="boolean"
   		defaultValue="false"/>
   <option
   		category="bupc.ui.optionCategory.compiler.gen"
   		command="-g"
   		id="bupc.ui.compiler.general.debug"
   		isAbstract="false"
   		name = "Debug"
   		resourceFilter="project"
   		valueType="boolean"
   		defaultValue="false">
   		<enablement 
            type="CONTAINER_ATTRIBUTE" 
            attribute="defaultValue" 
            value="true"
            extensionAdjustment="false">
			<checkBuildProperty 
				property="org.eclipse.cdt.build.core.buildType"
				value="org.eclipse.cdt.build.core.buildType.debug"/>
		</enablement>
   	</option>
	<option
   		category="bupc.ui.optionCategory.compiler.gen"
   		command="-O"
   		id="bupc.ui.compiler.general.opt"
   		isAbstract="false"
   		name = "Generate optimized objects"
   		resourceFilter="project"
   		valueType="boolean"
   		defaultValue="false"/>
   	<option
   		category="bupc.ui.optionCategory.compiler.gen"
   		command="-opt"
   		id="bupc.ui.compiler.general.opt.exp"
   		isAbstract="false"
   		name = "Enable experimental UPC translator optimizations"
   		resourceFilter="project"
   		valueType="boolean"
   		defaultValue="false"/>
   		
   	<optionCategory
		owner="org.eclipse.cdt.managedbuild.tool.bupc.compiler"
		name="UPC options"
		id="bupc.ui.optionCategory.compiler.upc">
	</optionCategory>
	
    <option
	  	name="Network API"
	  	category="bupc.ui.optionCategory.compiler.upc"
	  	id="bupc.ui.compiler.network"
	  	valueType="enumerated">

		  <enumeratedOptionValue
		  		  name="Default"
				  isDefault="true"
				  command=""
				  id="bupc.ui.compiler.network.default">
		  </enumeratedOptionValue>  	
		  <enumeratedOptionValue
		  		  name="MPI"
				  isDefault="false"
				  command="-network=mpi"
				  id="bupc.ui.compiler.network.mpi">
		  </enumeratedOptionValue>
		  <enumeratedOptionValue
				  name="UDP"
				  command="-network=udp"
				  id="bupc.ui.compiler.network.udp">
		  </enumeratedOptionValue>
		  <enumeratedOptionValue
				  name="ELAN"
				  command="-network=elan"
				  id="bupc.ui.compiler.network.elan">
		  </enumeratedOptionValue>
		  <enumeratedOptionValue
				  name="IBM LAPI"
				  command="-network=lapi"
				  id="bupc.ui.compiler.network.lapi">
		  </enumeratedOptionValue>
		  <enumeratedOptionValue
				  name="Myrinet GM"
				  command="-network=gm"
				  id="bupc.ui.compiler.network.gm">
		  </enumeratedOptionValue>
		  <enumeratedOptionValue
				  name="SMP"
				  command="-network=smp"
				  id="bupc.ui.compiler.network.smp">
		  </enumeratedOptionValue>
		  <enumeratedOptionValue
				  name="VAPI"
				  command="-network=vapi"
				  id="bupc.ui.compiler.network.vapi">
		  </enumeratedOptionValue>
		  <enumeratedOptionValue
				  name="OpenIB"
				  command="-network=ibv"
				  id="bupc.ui.compiler.network.ibv">
		  </enumeratedOptionValue>
		  <enumeratedOptionValue
				  name="Dolphin SCI"
				  command="-network=sci"
				  id="bupc.ui.compiler.network.sci">
		  </enumeratedOptionValue>
		  <enumeratedOptionValue
				  name="SHMEM"
				  command="-network=shmem"
				  id="bupc.ui.compiler.network.shmem">
		  </enumeratedOptionValue>
		  <enumeratedOptionValue
				  name="Cray XT Portals"
				  command="-network=portals"
				  id="bupc.ui.compiler.network.portals">
		  </enumeratedOptionValue>
		  <enumeratedOptionValue
				  name="BlueGene/P DCMF"
				  command="-network=dcmf"
				  id="bupc.ui.compiler.network.dcmf">
		  </enumeratedOptionValue>
	</option>
   	<option
		category="bupc.ui.optionCategory.compiler.upc"
		command="-shared-heap="
		id="bupc.ui.compiler.upc.sharedheap"
		isAbstract="false"
		name="-shared-heap="
		resourceFilter="project"
		valueType="string"/>
   	<option
		category="bupc.ui.optionCategory.compiler.upc"
		command="-T="
		id="bupc.ui.compiler.upc.fixedthreads"
		isAbstract="false"
		name="-T="
		resourceFilter="project"
		valueType="string"/>

	<optionCategory
		owner="org.eclipse.cdt.managedbuild.tool.bupc.compiler"
		name="Symbols"
		id="bupc.ui.optionCategory.compiler.symbols">
	</optionCategory>
   		<option
			  name="Defined symbols (-D)"
			  category="bupc.ui.optionCategory.compiler.symbols"
			  command="-D"
			  id="bupc.ui.compiler.def.symbol"
			  valueType="definedSymbols">
		  </option>
		  <option
			  name="Undefined symbols (-U)"
			  category="bupc.ui.optionCategory.compiler.symbols"
			  command="-U"
			  id="bupc.ui.compiler.undef.symbol"
			  valueType="undefDefinedSymbols">
		  </option>
	<optionCategory
		owner="org.eclipse.cdt.managedbuild.tool.bupc.compiler"
		name="Directories"
		id="bupc.ui.optionCategory.compiler.dirs">
	</optionCategory>
		  <option
			  name="Include paths (-I)"
			  category="bupc.ui.optionCategory.compiler.dirs"
			  command="-I"
			  id="bupc.ui.compiler.general.incpath"
			  valueType="includePath"
			  browseType="directory">
		  </option>		
	<optionCategory
		owner="org.eclipse.cdt.managedbuild.tool.bupc.compiler"
		id = "bupc.ui.optionCategory.compiler.upcOptions"
		name = "Advanced options"/>
	<option
		category="bupc.ui.optionCategory.compiler.upcOptions"
		command="-pthreads="
		id="bupc.ui.compiler.advOptions.pthread"
		isAbstract="false"
		name="-pthreads="
		resourceFilter="project"
		valueType="string"/>
	<optionCategory
		owner="org.eclipse.cdt.managedbuild.tool.bupc.compiler"
		id = "bupc.ui.optionCategory.compiler.miscOptions"
		name = "Miscellaneous"/>
	<option
	    defaultValue="-c"
		category="bupc.ui.optionCategory.compiler.miscOptions"
		command=""
		id="bupc.ui.compiler.miscOptions.other"
		isAbstract="false"
		name="Other options"
		resourceFilter="project"
		valueType="string"/>
	<option
		defaultValue="false"
		name="Verbose (-v)"
		category="bupc.ui.optionCategory.compiler.miscOptions"
		command="-v"
		id="bupc.ui.compiler.miscOptions.verbose"
		valueType="boolean"/>
	<option
		defaultValue="false"
		name="Extra verbose (-vv)"
		category="bupc.ui.optionCategory.compiler.miscOptions"
		command="-v"
		id="bupc.ui.compiler.miscOptions.extraVerbose"
		valueType="boolean"/>
	<inputType
		id="cdt.managedbuild.tool.bupc.compiler.input"						      					
		multipleOfType ="false"
	    dependencyContentType="org.eclipse.cdt.core.cHeader"
		dependencyExtensions="h"      					
		name = "UPC sources"
		primaryInput = "true"
		languageId="org.eclipse.cdt.core.parser.upc.upc"      					
		superClass="org.eclipse.cdt.build.core.settings.holder.inType"						
		sources = "upc,c">
	</inputType>
	<outputType
       id="cdt.managedbuild.tool.bupc.compiler.output"
       name="Object Files"
       outputs="o"
       buildVariable="OBJS"
       primaryInputType="cdt.managedbuild.tool.bupc.compiler.input"
       primaryOutput="true"/>
								
  </tool>
  
    <tool
	command="upcc"
	id = "org.eclipse.cdt.managedbuild.tool.bupc.linker"
	isAbstract="false"
	name = "Berkeley UPC Linker"
	natureFilter = "both"
	outputFlag = "-o">
	<supportedProperties>
            <property id="org.eclipse.cdt.build.core.buildType">
	            <value id="org.eclipse.cdt.build.core.buildType.debug"/>
    	        <value id="org.eclipse.cdt.build.core.buildType.release"/>
            </property>
    </supportedProperties>
	<optionCategory
		id = "bupc.ui.optionCategory.linker.gen"
		name = "General"/>
	<option
   		category="bupc.ui.optionCategory.linker.gen"
   		command="-g"
   		id="bupc.ui.linker.general.debug"
   		isAbstract="false"
   		name = "Debug"
   		resourceFilter="project"
   		valueType="boolean"
   		defaultValue="false">
   		<enablement 
            type="CONTAINER_ATTRIBUTE" 
            attribute="defaultValue" 
            value="true"
            extensionAdjustment="false">
			<checkBuildProperty 
				property="org.eclipse.cdt.build.core.buildType"
				value="org.eclipse.cdt.build.core.buildType.debug"/>
		</enablement>
   	</option>
	<option 
		category = "bupc.ui.optionCategory.linker.gen"
		id = "bupc.ui.linker.general.strip"
		command = "-s"
		isAbstract = "false"
		name = "Strip the symbolic information from the final executable"
		resourceFilter = "project"
		valueType = "boolean" 
		defaultValue="false"/>

   	<optionCategory
		owner="org.eclipse.cdt.managedbuild.tool.bupc.linker"
		name="UPC options"
		id="bupc.ui.optionCategory.linker.upc">
	</optionCategory>
	
    <option
	  	name="Network API"
	  	category="bupc.ui.optionCategory.linker.upc"
	  	id="bupc.ui.linker.upc.network"
	  	valueType="enumerated">

		  <enumeratedOptionValue
		  		  name="Default"
				  isDefault="true"
				  command=""
				  id="bupc.ui.linker.upc.network.default">
		  </enumeratedOptionValue>  	
		  <enumeratedOptionValue
		  		  name="MPI"
				  isDefault="false"
				  command="-network=mpi"
				  id="bupc.ui.linker.upc.network.mpi">
		  </enumeratedOptionValue>
		  <enumeratedOptionValue
				  name="UDP"
				  command="-network=udp"
				  id="bupc.ui.linker.upc.network.udp">
		  </enumeratedOptionValue>
		  <enumeratedOptionValue
				  name="ELAN"
				  command="-network=elan"
				  id="bupc.ui.linker.upc.network.elan">
		  </enumeratedOptionValue>
		  <enumeratedOptionValue
				  name="IBM LAPI"
				  command="-network=lapi"
				  id="bupc.ui.linker.upc.network.lapi">
		  </enumeratedOptionValue>
		  <enumeratedOptionValue
				  name="Myrinet GM"
				  command="-network=gm"
				  id="bupc.ui.linker.upc.network.gm">
		  </enumeratedOptionValue>
		  <enumeratedOptionValue
				  name="SMP"
				  command="-network=smp"
				  id="bupc.ui.linker.upc.network.smp">
		  </enumeratedOptionValue>
		  <enumeratedOptionValue
				  name="VAPI"
				  command="-network=vapi"
				  id="bupc.ui.linker.upc.network.vapi">
		  </enumeratedOptionValue>
		  <enumeratedOptionValue
				  name="OpenIB"
				  command="-network=ibv"
				  id="bupc.ui.linker.upc.network.ibv">
		  </enumeratedOptionValue>
		  <enumeratedOptionValue
				  name="Dolphin SCI"
				  command="-network=sci"
				  id="bupc.ui.linker.upc.network.sci">
		  </enumeratedOptionValue>
		  <enumeratedOptionValue
				  name="SHMEM"
				  command="-network=shmem"
				  id="bupc.ui.linker.upc.network.shmem">
		  </enumeratedOptionValue>
		  <enumeratedOptionValue
				  name="Cray XT Portals"
				  command="-network=portals"
				  id="bupc.ui.linker.upc.network.portals">
		  </enumeratedOptionValue>
		  <enumeratedOptionValue
				  name="BlueGene/P DCMF"
				  command="-network=dcmf"
				  id="bupc.ui.linker.upc.network.dcmf">
		  </enumeratedOptionValue>
	</option>
   	<option
		category="bupc.ui.optionCategory.linker.upc"
		command="-shared-heap="
		id="bupc.ui.linker.upc.sharedheap"
		isAbstract="false"
		name="-shared-heap="
		resourceFilter="project"
		valueType="string"/>
   	<option
		category="bupc.ui.optionCategory.linker.upc"
		command="-T="
		id="bupc.ui.linker.upc.fixedthreads"
		isAbstract="false"
		name="-T="
		resourceFilter="project"
		valueType="string"/>

    <optionCategory
               owner="org.eclipse.cdt.managedbuild.tool.bupc.linker"
               name="Libraries"
               id="bupc.ui.optionCategory.linker.libs">
    </optionCategory>
     <option
           name="Libraries (-l)"
           category="bupc.ui.optionCategory.linker.libs"
           command="-l"
           id="bupc.ui.linker.libs"
           browseType="none"
           valueType="libs">
     </option>
     <option
           name="Library search path (-L)"
           category="bupc.ui.optionCategory.linker.libs"
           command="-L"
           id="bupc.ui.linker.paths"
           browseType="directory"
           valueType="libPaths">
     </option>
   		    					
	<optionCategory
		id = "bupc.ui.optionCategory.linker.advOptions"
		name = "Advanced options"/>
	<option
		category="bupc.ui.optionCategory.linker.advOptions"
		command="-pthreads="
		id="bupc.ui.linker.advOptions.pthread"
		isAbstract="false"
		name="-pthreads="
		resourceFilter="project"
		valueType="string"/>
	<option
		category="bupc.ui.optionCategory.linker.advOptions"
		command=""
		id="bupc.ui.linker.advOptions.other"
		isAbstract="false"
		name="Other options"
		resourceFilter="project"
		valueType="string"/>
				
	<inputType
		id="cdt.managedbuild.tool.bupc.linker.input"						      					
		multipleOfType ="true"
		dependencyCalculator="org.eclipse.cdt.managedbuilder.makegen.internal.DefaultNoDependencyCalculator"    					
		primaryInput = "true"
		languageId="org.eclipse.cdt.core.parser.upc.upc"	
		sourceContentType="org.eclipse.cdt.managedbuilder.core.compiledObjectFile"				
		sources = "o"
        buildVariable="OBJS">
		
	</inputType>
	
	<outputType
       id="cdt.managedbuild.tool.bupc.linker.output"
       name="Executables"
       outputs=""
       buildVariable="EXECUTABLES"
       primaryInputType="cdt.managedbuild.tool.bupc.linker.input"
       primaryOutput="true"/>
								
  </tool>
      
  <toolChain
          archList="all"
          osList="linux,hpux,aix,qnx"
          name="Berkeley UPC"
          targetTool="org.eclipse.cdt.managedbuild.tool.bupc.linker"
          id="cdt.managedbuild.toolchain.bupc.exe.base">
		          <targetPlatform
		              id="cdt.managedbuild.target.bupc.platform.base"
		              name="Debug Platform"
		              binaryParser="org.eclipse.cdt.core.ELF"
		              osList="linux,hpux,aix,qnx"
		              archList="all">
	              </targetPlatform>
		     	  
		     	  <builder
					id="org.eclipse.cdt.managedbuilder.bupc.builder.base"
					isAbstract="false"
					isVariableCaseSensitive="false"
					superClass="org.eclipse.cdt.build.core.internal.builder">
				</builder>
		     	    
                  <tool
                      id="org.eclipse.cdt.managedbuild.tool.bupc.compiler.base"
                      superClass="org.eclipse.cdt.managedbuild.tool.bupc.compiler"/>
                  <tool
                      id="org.eclipse.cdt.managedbuild.tool.bupc.linker.base"
                      superClass="org.eclipse.cdt.managedbuild.tool.bupc.linker"/>
 
	</toolChain>
      
      <projectType
      	id = "cdt.managedbuild.target.bupc.exe"
      	buildArtefactType = "org.eclipse.cdt.build.core.buildArtefactType.exe"
      	isAbstract="false"
      	isTest="false">
      	<configuration
      		cleanCommand = "rm -rf"
      		description = "Debug configuration"
      		id = "cdt.managedbuild.config.bupc.exe.debug"
      		buildProperties="org.eclipse.cdt.build.core.buildType=org.eclipse.cdt.build.core.buildType.debug"
      		name = "Debug">
      		<toolChain
      			superClass="cdt.managedbuild.toolchain.bupc.exe.base"
      			id = "cdt.managedbuild.toolchain.bupc.exe.debug">	
      			<targetPlatform
      				superClass="cdt.managedbuild.target.bupc.platform.base"
		        	id="cdt.managedbuild.target.bupc.platform.exe.debug">
		        </targetPlatform>
      			<builder
					superClass="org.eclipse.cdt.managedbuilder.bupc.builder.base"
					id="org.eclipse.cdt.managedbuilder.bupc.builder.exe.debug">
				</builder>
				<tool
                	id="org.eclipse.cdt.managedbuild.tool.bupc.compiler.exe.debug"
                    superClass="org.eclipse.cdt.managedbuild.tool.bupc.compiler.base">
                    
                    <!--                      
                    <option
				    	id="gnu.cpp.compiler.exe.debug.option.optimization.level"
                        superClass="gnu.cpp.compiler.option.optimization.level">
                    </option>
                    -->  
                    <option
						id="bupc.ui.compiler.exe.debug.option.debug"
                        superClass="bupc.ui.compiler.general.debug">
                    </option>
                </tool>
	              <tool
	                  id="org.eclipse.cdt.managedbuild.tool.bupc.linker.exe.debug"
	                  superClass="org.eclipse.cdt.managedbuild.tool.bupc.linker.base">
	                  <!--                     
			  	      <option
					      id="gnu.c.compiler.exe.debug.option.optimization.level"
						  superClass="gnu.c.compiler.option.optimization.level">
					  </option>
					  -->
					  <option   
					      id="bupc.ui.linker.exe.debug.option.debug"					     
					      superClass="bupc.ui.linker.general.debug">
					  </option>
				  </tool>
      	</toolChain>
      </configuration>
      <configuration
      		cleanCommand = "rm -rf"
      		description = "Release configuration"
      		id = "cdt.managedbuild.config.bupc.exe.release"
      		buildProperties="org.eclipse.cdt.build.core.buildType=org.eclipse.cdt.build.core.buildType.release"
      		name = "Release">
      		<toolChain
      			superClass="cdt.managedbuild.toolchain.bupc.exe.base"
      			id = "cdt.managedbuild.toolchain.bupc.exe.release">	
      			<targetPlatform
      				superClass="cdt.managedbuild.target.bupc.platform.base"
		        	id="cdt.managedbuild.target.bupc.platform.exe.release">
		        </targetPlatform>
      			<builder
					superClass="org.eclipse.cdt.managedbuilder.bupc.builder.base"
					id="org.eclipse.cdt.managedbuilder.bupc.builder.exe.release">
				</builder>
				<tool
                	id="org.eclipse.cdt.managedbuild.tool.bupc.compiler.exe.release"
                    superClass="org.eclipse.cdt.managedbuild.tool.bupc.compiler.base">
                    
                    <!--                      
                    <option
				    	id="gnu.cpp.compiler.exe.debug.option.optimization.level"
                        superClass="gnu.cpp.compiler.option.optimization.level">
                    </option>
                    -->  
                    <option
						id="bupc.ui.compiler.exe.release.option.debug"
                        superClass="bupc.ui.compiler.general.debug">
                    </option>
                </tool>
	              <tool
	                  id="org.eclipse.cdt.managedbuild.tool.bupc.linker.exe.release"
	                  superClass="org.eclipse.cdt.managedbuild.tool.bupc.linker.base">
	                  <!--                     
			  	      <option
					      id="gnu.c.compiler.exe.debug.option.optimization.level"
						  superClass="gnu.c.compiler.option.optimization.level">
					  </option>
					  -->
					  <option   
					      id="bupc.ui.linker.exe.release.option.debug"					     
					      superClass="bupc.ui.linker.general.debug">
					  </option>
				  </tool>
      	</toolChain>
      </configuration>
     </projectType>
</extension>
</plugin>
