<?xml version="1.0" encoding="UTF-8"?>
<?eclipse version="3.0"?>
<plugin>

     <extension-point id="newWizardPages" name="Custom MBS New Wizard Pages" schema="schema/newWizardPages.exsd"/>
     <extension-point id="DiscoveryProfileUI" name="DiscoveryProfileUI" schema="schema/DiscoveryProfileUI.exsd"/>
     <extension-point id="CDTWizard" name="CDTWizard" schema="schema/CDTWizard.exsd"/>

   <extension
         point="org.eclipse.ui.newWizards">
<!-- Managed Make Builder Projects -->
      <wizard
            canFinishEarly="false"
            category="org.eclipse.cdt.ui.newCDTWizards"
            class="org.eclipse.cdt.managedbuilder.ui.wizards.CDTProjectWizard"
            finalPerspective="org.eclipse.cdt.ui.CPerspective"
            hasPages="true"
            icon="icons/elcl16/newmngcc_app.gif"
            id="org.eclipse.cdt.managedbuilder.ui.wizards.NewCWizard3"
            name="CDT project"
            project="true">
          <description>
             Create a new language-neutral project
          </description>
       </wizard>
      <wizard
            canFinishEarly="false"
            category="org.eclipse.cdt.ui.newCCWizards"
            class="org.eclipse.cdt.managedbuilder.ui.wizards.CCProjectWizard"
            finalPerspective="org.eclipse.cdt.ui.CPerspective"
            hasPages="true"
            icon="icons/elcl16/newmngcc_app.gif"
            id="org.eclipse.cdt.managedbuilder.ui.wizards.NewCWizard1"
            name="C++ project"
            project="true">
          <description>
             Create a new C++ project
          </description>
       </wizard>
       <wizard
             canFinishEarly="false"
             category="org.eclipse.cdt.ui.newCWizards"
             class="org.eclipse.cdt.managedbuilder.ui.wizards.CProjectWizard"
             finalPerspective="org.eclipse.cdt.ui.CPerspective"
             hasPages="true"
             icon="icons/elcl16/newmngcc_app.gif"
             id="org.eclipse.cdt.managedbuilder.ui.wizards.NewCWizard2"
             name="C project"
             project="true">
         <description>
             Create a new C project
         </description>
      </wizard>
   </extension>
      
   <extension
         point="org.eclipse.ui.preferencePages">
      <page
            name="%MakeBuildPref.name"
            category="org.eclipse.cdt.ui.preferences.CPluginPreferencePage"
            class="org.eclipse.cdt.managedbuilder.ui.newui.PrefPage_NewCDTProject"
            id="org.eclipse.cdt.managedbuilder.ui.preferences.BuildPreferences">
      </page>
   </extension>
   
   <!-- Action for Project Converter in context menu -->
  <extension
         point="org.eclipse.ui.popupMenus">
      <objectContribution
            objectClass="org.eclipse.core.resources.IProject"
            adaptable="true"
            id="org.eclipse.cdt.managedbuilder.ui.popupMenu.ConvertTargetContribution">
         <action
               label="%ConvertTargetAction.label"
               class="org.eclipse.cdt.managedbuilder.ui.actions.ConvertTargetAction"
               menubarPath="convertGroup"
               enablesFor="1"
               id="org.eclipse.cdt.managedbuilder.ui.ConvertTargetAction">
         </action>         
         <filter
               name="projectNature"
               value="org.eclipse.cdt.managedbuilder.core.managedBuildNature">
         </filter>
      </objectContribution>
      
      <objectContribution
           adaptable="true"
           id="org.eclipse.cdt.managedbuilder.ui.BuildSelectedFilesContribution"
           objectClass="org.eclipse.core.resources.IResource">
        <action
              class="org.eclipse.cdt.managedbuilder.ui.actions.BuildFilesAction"
              enablesFor="+"
              id="org.eclipse.cdt.managedbuilder.ui.popups.buildFilesAction"
              label="%BuildSelectedFiles.label"
              menubarPath="additions"/>
        <action
              class="org.eclipse.cdt.managedbuilder.ui.actions.CleanFilesAction"
              enablesFor="+"
              id="org.eclipse.cdt.managedbuilder.ui.popups.cleanFilesAction"
              label="%CleanSelectedFiles.label"
              menubarPath="additions"/>
        <visibility>
           <and>
              <not>
                 <objectClass name="org.eclipse.core.resources.IProject"/>
              </not>
              <not>
                 <objectClass name="org.eclipse.core.resources.IFolder"/>
              </not>
              <objectState
                    name="projectNature"
                    value="org.eclipse.cdt.managedbuilder.core.managedBuildNature"/>
           </and>
        </visibility>
     </objectContribution>
      
   </extension>
  <extension
        point="org.eclipse.ui.actionSets">
     <actionSet
           id="org.eclipse.cdt.managedbuilder.ui.buildSelectedFilesActionSet"
           label="%BuildSelectedFilesActionSet.label"
           visible="false">
        <action
              class="org.eclipse.cdt.managedbuilder.ui.actions.BuildFilesAction"
              enablesFor="+"
              id="org.eclipse.cdt.managedbuilder.ui.buildFilesAction"
              label="%BuildSelectedFiles.label"
              menubarPath="project/build"
              style="push"
              tooltip="%buildSelectedFiles.tooltip">
        </action>
        <action
              class="org.eclipse.cdt.managedbuilder.ui.actions.CleanFilesAction"
              enablesFor="+"
              id="org.eclipse.cdt.managedbuilder.ui.cleanFilesAction"
              label="%CleanSelectedFiles.label"
              menubarPath="project/build"
              style="push"
              tooltip="%cleanFilesAction.tooltip">
        </action>
     </actionSet>
  </extension>
  <extension
        point="org.eclipse.ui.perspectiveExtensions">
     <perspectiveExtension targetID="org.eclipse.cdt.ui.CPerspective">
        <actionSet id="org.eclipse.cdt.managedbuilder.ui.buildSelectedFilesActionSet"/>
     </perspectiveExtension>
  </extension>

  <!-- Common Navigator extensions  -->
  <extension
        point="org.eclipse.ui.navigator.navigatorContent">
     <commonWizard
           associatedExtensionId="org.eclipse.cdt.ui.navigator.content"
           menuGroupId="org.eclipse.cdt.ui.newCWizards"
           type="new"
           wizardId="org.eclipse.cdt.managedbuilder.ui.wizards.StdCCWizard">
         <enablement/>
      </commonWizard>
     <commonWizard
           associatedExtensionId="org.eclipse.cdt.ui.navigator.content"
           menuGroupId="org.eclipse.cdt.ui.newCWizards"
           type="new"
           wizardId="org.eclipse.cdt.managedbuilder.ui.wizards.StdCWizard">
         <enablement/>
      </commonWizard>
  </extension>
  <extension
        point="org.eclipse.ui.navigator.viewer">
     <viewerContentBinding viewerId="org.eclipse.ui.navigator.ProjectExplorer">
        <includes>
           <contentExtension pattern="org.eclipse.cdt.managedbuilder.ui.wizards.*"/>
        </includes>
     </viewerContentBinding>
  </extension>   

  <extension
           point="org.eclipse.cdt.ui.cPropertyTab">
     <tab
           class="org.eclipse.cdt.managedbuilder.ui.newui.DiscoveryTab"
           icon="icons/elcl16/discovery.gif"
           name="Discovery options"
           weight="005"
           parent="org.eclipse.cdt.ui.newui.Page_PathAndSymb"/>
     <tab
           class="org.eclipse.cdt.managedbuilder.ui.newui.ToolSettingsTab"
           icon="icons/elcl16/config-tool.gif"
           name="Tool settings"
           weight="001"
           parent="org.eclipse.cdt.ui.newui.Page_BuildSettings"/>
     <tab
           class="org.eclipse.cdt.managedbuilder.ui.newui.BuildStepsTab"
           icon="icons/obj16/steps.gif"
           name="Build steps"
           parent="org.eclipse.cdt.ui.newui.Page_BuildSettings"
           weight="002"/>
     <tab
           class="org.eclipse.cdt.managedbuilder.ui.newui.ArtifactTab"
           icon="icons/obj16/artifact.gif"
           name="Build artifact"
           parent="org.eclipse.cdt.ui.newui.Page_BuildSettings"
           weight="003"/>
     <tab
           class="org.eclipse.cdt.managedbuilder.ui.newui.BuilderSettingsTab"
           icon="icons/obj16/build_settings.gif"
           name="Builder settings"
           parent="org.eclipse.cdt.ui.newui.Page_BuildSettings"
           weight="004"/>
     <tab
           class="org.eclipse.cdt.managedbuilder.ui.newui.CPropertyVarsTab"
           name="(Single) CDT Vars (macros)"
           parent="org.eclipse.cdt.ui.newui.Page_Variables"/>
     <!--tab
           class="org.eclipse.cdt.managedbuilder.ui.newui.ToolChainEditTab"
           name="(Single) Tool chain edit"
           parent="org.eclipse.cdt.ui.newui.Page_ToolChain"/-->

<!-- exported from CORE -->           
     <tab
           class="org.eclipse.cdt.ui.newui.IncludeTab"
           icon="icons/obj16/hfolder_obj.gif"
           name="Includes"
           weight="001"
           parent="org.eclipse.cdt.ui.newui.Page_PathAndSymb"
           tooltip="&quot;Includes list&quot;"/>
     <tab
           class="org.eclipse.cdt.ui.newui.SymbolTab"
           icon="icons/obj16/define_obj.gif"
           name="Symbols"
           weight="002"
           parent="org.eclipse.cdt.ui.newui.Page_PathAndSymb"
           tooltip="&quot;Macros list&quot;"/>
     <tab
           class="org.eclipse.cdt.ui.newui.LibraryTab"
           icon="icons/obj16/lib_obj.gif"
           name="Libraries"
           weight="003"
           parent="org.eclipse.cdt.ui.newui.Page_PathAndSymb"
           tooltip="&quot;Libraries list&quot;"/>
     <tab
           class="org.eclipse.cdt.ui.newui.LibraryPathTab"
           icon="icons/obj16/opentype.gif"
           name="Library paths"
           weight="004"
           parent="org.eclipse.cdt.ui.newui.Page_PathAndSymb"/>
     <tab
           class="org.eclipse.cdt.ui.newui.RefsTab"
           icon="icons/obj16/search_ref_obj.gif"
           name="References"
           weight="010"
           parent="org.eclipse.cdt.ui.newui.Page_PathAndSymb"/>
     <tab
           class="org.eclipse.cdt.ui.newui.CLocationSourceTab"
           icon="icons/obj16/fldr_obj.gif"
           name="Source location"
           weight="008"           
           parent="org.eclipse.cdt.ui.newui.Page_PathAndSymb"/>
     <tab
           class="org.eclipse.cdt.managedbuilder.ui.newui.CBuildLocationOutputTab"
           icon="icons/obj16/output_folder_obj.gif"
           name="Output location"
           weight="009"           
           parent="org.eclipse.cdt.ui.newui.Page_PathAndSymb"/>
<!-- temporary disabled          
     <tab
           class="org.eclipse.cdt.ui.newui.SDKsTab"
           name="SDKs"
           parent="org.eclipse.cdt.ui.newui.Page_PathAndSymb"
           />
-->           
     <tab
           class="org.eclipse.cdt.ui.newui.EnvironmentTab"
           icon="icons/obj16/environment.gif"
           name="Environment"
           weight="005"
           parent="org.eclipse.cdt.ui.newui.Page_BuildSettings"/>
     <tab
           class="org.eclipse.cdt.ui.newui.BinaryParsTab"
           icon="icons/obj16/bin_obj.gif"
           name="Binary parsers"
           weight="006"
           parent="org.eclipse.cdt.ui.newui.Page_BuildSettings"/>
     <tab
           class="org.eclipse.cdt.ui.newui.ErrorParsTab"
           icon="icons/obj16/error_obj.gif"
           name="Error parsers"
           weight="007"
           parent="org.eclipse.cdt.ui.newui.Page_BuildSettings"/>
     <tab
           class="org.eclipse.cdt.ui.newui.LanguagesTab"
           name="(Single) Languages"
           parent="org.eclipse.cdt.ui.newui.Page_Languages"
           />
	 <!-- Export settings page -->
	      <tab
           class="org.eclipse.cdt.ui.newui.ExpIncludeTab"
           icon="icons/obj16/hfolder_obj.gif"
           name="Includes"
           parent="org.eclipse.cdt.ui.newui.Page_ExpPathAndSymb"
           tooltip="&quot;Includes list&quot;"/>
     <tab
           class="org.eclipse.cdt.ui.newui.ExpSymbolTab"
           icon="icons/obj16/define_obj.gif"
           name="Symbols"
           parent="org.eclipse.cdt.ui.newui.Page_ExpPathAndSymb"
           tooltip="&quot;Macros list&quot;"/>
     <tab
           class="org.eclipse.cdt.ui.newui.ExpLibraryTab"
           icon="icons/obj16/lib_obj.gif"
           name="Libraries"
           parent="org.eclipse.cdt.ui.newui.Page_ExpPathAndSymb"
           tooltip="&quot;Libraries list&quot;"/>
     <tab
           class="org.eclipse.cdt.ui.newui.ExpLibraryPathTab"
           icon="icons/obj16/opentype.gif"
           name="Library paths"
           parent="org.eclipse.cdt.ui.newui.Page_ExpPathAndSymb"/>

     <!-- tabs for Preference pages -->      
     <tab
           class="org.eclipse.cdt.ui.newui.EnvironmentTab"
           icon="icons/obj16/environment.gif"
           name="(Single) Environment"
           parent="org.eclipse.cdt.ui.newui.PrefPage_Env"/>
     <tab
           class="org.eclipse.cdt.managedbuilder.ui.newui.CPropertyVarsTab"
           name="(Single) CDT Vars (macros)"
           parent="org.eclipse.cdt.ui.newui.PrefPage_Vars"/>
     <tab
           class="org.eclipse.cdt.ui.newui.BinaryParsTab"
           name="Binary parsers"
           icon="icons/obj16/bin_obj.gif"
           parent="org.eclipse.cdt.managedbuilder.ui.newui.PrefPage_NewCDTProject"
           />
     <tab
           class="org.eclipse.cdt.ui.newui.ErrorParsTab"
           name="Error parsers"
           icon="icons/obj16/error_obj.gif"
           parent="org.eclipse.cdt.managedbuilder.ui.newui.PrefPage_NewCDTProject"
           />
     <tab
           class="org.eclipse.cdt.managedbuilder.ui.newui.DiscoveryTab"
           icon="icons/elcl16/discovery.gif"
           name="Discovery options"
           parent="org.eclipse.cdt.managedbuilder.ui.newui.PrefPage_NewCDTProject"
           />
     <tab
           class="org.eclipse.cdt.managedbuilder.ui.newui.BuilderSettingsTab"
           icon="icons/obj16/build_settings.gif"
           name="Builder settings"
           parent="org.eclipse.cdt.managedbuilder.ui.newui.PrefPage_NewCDTProject"/>
  </extension>   

      <extension
            id="BuildSystemWizard"
            name="BuildSystemWizard"
            point="org.eclipse.cdt.managedbuilder.ui.CDTWizard">
         <wizard
               class="org.eclipse.cdt.managedbuilder.ui.wizards.CNewWizard"
               name="Build System Wizard">
         </wizard>
         <wizard
               class="org.eclipse.cdt.managedbuilder.ui.wizards.StdBuildWizard"
               name="Make project Wizard">
         </wizard>
      </extension>
  
     <extension
         point="org.eclipse.cdt.managedbuilder.ui.DiscoveryProfileUI">
      <profilePage
            class="org.eclipse.cdt.managedbuilder.ui.newui.GCCPerProjectSCDProfilePage"
            name="Per project"
            profileId="org.eclipse.cdt.make.core.GCCStandardMakePerProjectProfile"
            profilePattern="PerProjectProfile"/>
      <profilePage
            class="org.eclipse.cdt.managedbuilder.ui.newui.GCCPerFileSCDProfilePage"
            name="Per file"
            profileId="org.eclipse.cdt.make.core.GCCStandardMakePerFileProfile"
            profilePattern="PerFileProfile"/>
   </extension>

<!-- Custom wizard pages - for testing only 
     <extension
         point="org.eclipse.cdt.managedbuilder.ui.newWizardPages">
      <wizardPage
            ID="org.eclipse.cdt.managedbuilder.ui.tests.wizardPages.AlwaysPresentWizardPage"
            pageClass="org.eclipse.cdt.managedbuilder.ui.test.AlwaysPresentWizardPage"/>
      <wizardPage
            ID="org.eclipse.cdt.managedbuilder.ui.tests.wizardPages.NatureAWizardPage"
            pageClass="org.eclipse.cdt.managedbuilder.ui.test.NatureAWizardPage">
         <nature  natureID="org.eclipse.cdt.core.cnature"/>
      </wizardPage>
      <wizardPage
            ID="org.eclipse.cdt.managedbuilder.ui.tests.wizardPages.NatureBWizardPage"
            pageClass="org.eclipse.cdt.managedbuilder.ui.test.NatureBWizardPage">
         <nature  natureID="org.eclipse.cdt.core.ccnature"/>
      </wizardPage>
      <wizardPage
            ID="org.eclipse.cdt.managedbuilder.ui.tests.wizardPages.ToolchainCWizardPage"
            pageClass="org.eclipse.cdt.managedbuilder.ui.test.ToolchainCWizardPage">
         <toolchain  toolchainID="cdt.managedbuild.toolchain.gnu.exe.debug"/>
      </wizardPage>
      <wizardPage
            ID="org.eclipse.cdt.managedbuilder.ui.tests.wizardPages.ToolchainCv20WizardPage"
            pageClass="org.eclipse.cdt.managedbuilder.ui.test.ToolchainCv20WizardPage">
         <toolchain
               toolchainID="C"
               versionsSupported="2.0.0"/>
      </wizardPage>
      <wizardPage
            ID="org.eclipse.cdt.managedbuilder.ui.tests.wizardPages.ProjectTypeDWizardPage"
            pageClass="org.eclipse.cdt.managedbuilder.ui.test.ProjectTypeDWizardPage">
         <projectType  projectTypeID="D"/>
      </wizardPage>
      <wizardPage
            ID="org.eclipse.cdt.managedbuilder.ui.tests.wizardPages.ProjectTypeEWizardPage"
            pageClass="org.eclipse.cdt.managedbuilder.ui.test.ProjectTypeEWizardPage">
         <projectType  projectTypeID="E"/>
      </wizardPage>
      <wizardPage
            ID="org.eclipse.cdt.managedbuilder.ui.tests.wizardPages.ToolchainFWizardPage"
            pageClass="org.eclipse.cdt.managedbuilder.ui.test.ToolchainFWizardPage">
         <toolchain toolchainID="F"/>
      </wizardPage>
   </extension>
-->
  <extension
        point="org.eclipse.cdt.ui.newCfgDialog">
        <dialog
              class="org.eclipse.cdt.managedbuilder.ui.newui.NewCfgDialog"
              mbs_id="org.eclipse.cdt.managedbuilder.core.configurationDataProvider"
              title="MBS: create configuration"/>
  </extension>

     <extension
         point="org.eclipse.ui.propertyPages">
        <page
            class="org.eclipse.cdt.ui.newui.Page_Variables"
            id="org.eclipse.ui.propertypages.project.ref10"
            name="%CDTVariablesProperty.name"
            >
         <filter
               name="projectNature"
               value="org.eclipse.cdt.managedbuilder.core.managedBuildNature">
         </filter>
         <enabledWhen>
            <or>
	     <instanceof value="org.eclipse.core.resources.IProject"/>
	     <instanceof value="org.eclipse.cdt.core.model.ICProject"/>
	    </or>
         </enabledWhen>
      </page>
      
      <page
            class="org.eclipse.cdt.ui.newui.Page_PathAndSymb"
            id="org.eclipse.ui.propertypages.project.ref12"
            name="%CDTPathSymbolsProperty.name"
            >
         <filter
               name="projectNature"
               value="org.eclipse.cdt.managedbuilder.core.managedBuildNature">
         </filter>
         <enabledWhen>
            <or>
		     <instanceof value="org.eclipse.core.resources.IProject"/>
		     <instanceof value="org.eclipse.cdt.core.model.ICProject"/>
		     
		     <instanceof value="org.eclipse.core.resources.IFolder"/>
		     <instanceof value="org.eclipse.cdt.core.model.ICContainer"/>

		     <and>
	`	         <instanceof value="org.eclipse.core.resources.IFile"/>
    	         <test property="org.eclipse.cdt.ui.isSource" value="" />
             </and>
             <and>
	         	<instanceof value="org.eclipse.cdt.core.model.ITranslationUnit"/>
    	        <test property="org.eclipse.cdt.ui.isSource" value="" />
	         </and>	

		    </or>          
         </enabledWhen>
      </page>
      
      <page
            class="org.eclipse.cdt.ui.newui.Page_ExpPathAndSymb"
            id="org.eclipse.ui.propertypages.project.ref16"
            name="%CDTExpPathSymbolsProperty.name"
            >
         <filter
               name="projectNature"
               value="org.eclipse.cdt.managedbuilder.core.managedBuildNature">
         </filter>
         <enabledWhen>
            <or>
		     <instanceof value="org.eclipse.core.resources.IProject"/>
		     <instanceof value="org.eclipse.cdt.core.model.ICProject"/>
		    </or>          
         </enabledWhen>
      </page>

      <page
            class="org.eclipse.cdt.ui.newui.Page_BuildSettings"
            id="org.eclipse.ui.propertypages.project.ref13"
            name="%CDTBuildProperty.name"
            >
         <filter
               name="projectNature"
               value="org.eclipse.cdt.managedbuilder.core.managedBuildNature">
         </filter>
         <enabledWhen>
            <or>
		     <instanceof value="org.eclipse.core.resources.IProject"/>
		     <instanceof value="org.eclipse.cdt.core.model.ICProject"/>
		     
		     <instanceof value="org.eclipse.core.resources.IFolder"/>
		     <instanceof value="org.eclipse.cdt.core.model.ICContainer"/>

		     <and>
`	         	<instanceof value="org.eclipse.core.resources.IFile"/>
    	        <test property="org.eclipse.cdt.ui.isSource" value="" />
             </and>
             <and>
	         	<instanceof value="org.eclipse.cdt.core.model.ITranslationUnit"/>
    	        <test property="org.eclipse.cdt.ui.isSource" value="" />
	         </and>	
		    </or>          
         </enabledWhen>
      </page>
      <!--page
            class="org.eclipse.cdt.ui.newui.Page_ToolChain"
            id="org.eclipse.ui.propertypages.project.ref14"
            name="%CDTToolchainProperty.name"
            >
         <filter
               name="projectNature"
               value="org.eclipse.cdt.managedbuilder.core.managedBuildNature">
         </filter>
         <enabledWhen>
            <or>
		     <instanceof value="org.eclipse.core.resources.IProject"/>
		     <instanceof value="org.eclipse.cdt.core.model.ICProject"/>
		     
		     <instanceof value="org.eclipse.core.resources.IFolder"/>
		     <instanceof value="org.eclipse.cdt.core.model.ICContainer"/>

		     <and>
	`	        <instanceof value="org.eclipse.core.resources.IFile"/>
    	        <test property="org.eclipse.cdt.ui.isSource" value="" />
             </and>
             <and>
	         	<instanceof value="org.eclipse.cdt.core.model.ITranslationUnit"/>
    	        <test property="org.eclipse.cdt.ui.isSource" value="" />
	         </and>	
		    </or>          
         </enabledWhen>
      </page-->
  </extension>
  
</plugin>
