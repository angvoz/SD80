<project name="CDT Automated Tests" default="run" basedir=".">

	<property name="library-file" value="${eclipse-home}/plugins/org.eclipse.test/library.xml"/>

	<property name="cdt-core-loc" value="${eclipse-home}/cdt_core_folder"/>
	<property name="cdt-ui-loc" value="${eclipse-home}/cdt_ui_folder"/>
	<property name="cdt-debug-ui-loc" value="${eclipse-home}/cdt_debug_ui_folder"/>
	<property name="cdt-mbs-core-loc" value="${eclipse-home}/cdt_mbs_core_folder"/>
	<property name="cdt-mbs-ui-loc" value="${eclipse-home}/cdt_mbs_ui_folder"/>

	<target name="init">
		<tstamp/>
	</target>

	<target name="cleanup">
	</target>

	<target name="run" depends="init,suite">
		<ant target="collect" antfile="${library-file}" dir="${eclipse-home}">
			<property name="includes" value="org*.xml"/>
			<property name="output-file" value="org.eclipse.cdt.testing.xml"/>
		</ant>
	</target>

	<target name="cdt-core" depends="init">
		<ant target="core-test" antfile="${library-file}" dir="${eclipse-home}">
			<property name="data-dir" value="${cdt-core-loc}"/>
			<property name="plugin-name" value="org.eclipse.cdt.core.tests"/>
			<property name="classname" value="org.eclipse.cdt.core.suite.AutomatedIntegrationSuite"/>
		</ant>
	</target>

	<target name="cdt-ui" depends="init">
		<ant target="ui-test" antfile="${library-file}" dir="${eclipse-home}">
			<property name="data-dir" value="${cdt-ui-loc}"/>
			<property name="plugin-name" value="org.eclipse.cdt.ui.tests"/>
			<property name="classname" value="org.eclipse.cdt.ui.tests.AutomatedSuite"/>
		</ant>
	</target>

	<target name="cdt-debug-ui" depends="init">
		<ant target="ui-test" antfile="${library-file}" dir="${eclipse-home}">
			<property name="data-dir" value="${cdt-debug-ui-loc}"/>
			<property name="plugin-name" value="org.eclipse.cdt.debug.ui.tests"/>
			<property name="classname" value="org.eclipse.cdt.debug.core.tests.AllDebugTests"/>
		</ant>
	</target>

	<target name="cdt-mbs-core" depends="init">
		<ant target="ui-test" antfile="${library-file}" dir="${eclipse-home}">
			<property name="data-dir" value="${cdt-mbs-core-loc}"/>
			<property name="plugin-name" value="org.eclipse.cdt.managedbuilder.core.tests"/>
			<property name="classname" value="org.eclipse.cdt.managedbuilder.tests.suite.AllManagedBuildTests"/>
		</ant>
	</target>

	<target name="cdt-mbs-ui" depends="init">
		<ant target="ui-test" antfile="${library-file}" dir="${eclipse-home}">
			<property name="data-dir" value="${cdt-mbs-ui-loc}"/>
			<property name="plugin-name" value="org.eclipse.cdt.managedbuilder.ui.tests"/>
			<property name="classname" value="org.eclipse.cdt.managedbuilder.ui.tests.suite.AllManagedBuildUITests"/>
		</ant>
	</target>

	<target name="suite">
		<antcall target="cdt-core"/>
		<!--antcall target="cdt-ui"/-->
		<antcall target="cdt-debug-ui"/>
		<antcall target="cdt-mbs-core"/>
		<antcall target="cdt-mbs-ui"/>
	</target>

</project>
